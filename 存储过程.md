# -----------------------------存储过程----------------------------- #


<p id="title"></p>

## 目录 ##

:arrow_down:<a href="#a1">1.存储过程简介</a>

:arrow_down:<a href="#a2">2.创建存储过程</a>

:arrow_down:<a href="#a3">3.修改存储过程</a>

<p id="a1"></p>

### :notes:存储过程简介 ###

:arrow_double_up:<a href = "#title">返回目录</a>

**:black_joker:简介**

* 存储过程是一组预先写好的能实现某种功能的T-SQL程序，也是一种数据库对象，是数据库中运用得十分广泛的一种数据对象。

* 存储过程的运用范围比较广，可以包含几乎所有的T-SQL语句，例如数据存取语句，流程控制语句，错误处理语句等使用起来十分有弹性。

* 存储过程是一组预先写好的能实现某种功能的T-SQL程序，指定一个程序名并编译后将其存在SQL Server中，以后要实现该功能，可以调用这个程序来完成，用户可以通过存储过程的名字并给出参数来执行。也和我们其他语言的函数以及方法类似。

**:black_joker:优点**

* 执行速度快，效率高 ： 存储过程会被事先编译为二进制可执行代码，调用时直接运行，可以加快速度。

* 模块式编程 ： 存储完毕后，可以多次调用，不用编写多次代码。

* 减少网络流量 ： 存储过程是保存在数据库上的一组T-sql代码，在客户端调用，在网络上传送这一组完整的T-SQL程序要小得多。

* 安全性 ： 存储过程可以作为一种安全机制来使用，当用户要访问一个表，可以使用存储过程来作为通道。

**:black_joker:分类**

* 系统存储过程 ： 系统存储过程一般是以‘sp_’为前缀的，是由于SQL自己本身创建，管理和使用的一种特殊的存储过程，不要对其进行修改或删除。

* 扩展存储过程 ： 扩展存储过程通常是以‘xp_’为前缀的，扩展存储过程允许使用其他脚本语言（如C#）来创建自己在外部存储过程，其内容并不存储在SQl中，而是以DLL形式单独存在，不过该功能可能已经被废除，尽量不要使用这个。

* 用户自定义存储过程 ： 由用户自行创建的存储过程，可以输入参数，向客户端，返回表格或者结果，消息等，也可以返回参数。通常我们使用这个，这也相当于其他语言的函数和方法。

<p id="a2"></p>

### :notes:创建存储过程 ###

:arrow_double_up:<a href = "#title">返回目录</a>

存储过程要确定三个组成部分： 

  1.输入参数与输出参数
  
  2.在存储过程中执行的T-SQl语句
  
  3.返回的状态，指明执行存储过程是成功还是失败

创建存储过程基本语句如下：

`CREATE PROC 存储过程名称`  ...  AS  执行语句

示例创建一个查表的存储过程

```SQL
CREATE PROC MAINS
AS
SELECT * FROM Student_Score
```

上面操作就生成了一个名为MAINS的存储过程，当然这只是生成，需要使用必须调用这个过程：

```sql
EXEC MAINS
```

这样就就可以完成调用

<p id="a3"></p>

### :notes:修改存储过程 ###

:arrow_double_up:<a href = "#title">返回目录</a>

当存储过程建立后，后面如果需要就行变更，可以对这个进行修改，修改语句也是一样，使用ALTER语句

```sql
ALTER PROC MAINS
AS
SELECT Math FROM Student_Score
GO
EXEC MAINS
```




















# -------------------- SqlServer数据表管理 ------------------- #

<p id="title"></p>

## 目录 ##

:arrow_down:<a href="#a1">1.1数据表简介</a>

:arrow_down:<a href="#a2">1.2数据表建立</a>

:arrow_down:<a href="#a3">1.3</a>

:arrow_down:<a href="#a4">1.4</a>

:arrow_down:<a href="#a5">1.5</a>

<p id="a1"></p>

## :mortar_board: 数据表简介 ##

:arrow_double_up:<a href = "#title">返回目录</a>

数据表是数据库重要的对象，数据库所有的东西都是存在表格里面的，数据表与平常所说的表一样，以行列储存信息。

数据表分为四类:

  * 系统表 ： 系统表包括服务器的配置信息，数据表的定义信息。这些都是只读的，不允许修改。
  
  * 用户表 ： 用户自己创建和维护，需要用于各种开发的表。
  
  * 已分区表 ： 已分区表是将数据水平划分为多个单元的表，这些单元可以分布到数据库中的多个文件组中。
  
  * 临时表 ： 临时表是由于系统或用户运算的临时需要而创建的表，该表只是临时使用，使用完毕后又删除。
  
### :orange_book:数据类型 ###

* 精确数字型

|数据类型|范围|储存长度|
|:--:|:---:|:-------:|
|bight|-2^63~2^63|8字节|
|int|-2^31~2^31|4字节|
|smallint|-2^15~2^15|2字节|
|tinyint|0~255|1字节|
|bit|0,1,Null|由列的大小决定，在列的大小上+1个字节|

 * 带固定精度和小数位数的数据类型
 
|数据类型|范围|储存长度|
|:--:|:---:|:-------:|
|numeric|-10^38+1~10^38+1|与精度有关|
|decimal|-10^38+1~10^38+1|与精度有关|

 * 货币型
 
 |数据类型|范围|储存长度|
 |:--:|:---:|:-------:|
 |money|-922337203685477.5808~922337203685477.5807|8字节|
 |smallmoney|-214748.3648~214748.3647|4字节|
 
  * 近似数字型
  
  |数据类型|范围|储存长度|
  |:--:|:---:|:-------:|
  |float|-1.79E+308~2.23E-308|与数值有关|
  |real|-3.40E+38~-1.18E-38,0及1.18E-38~3.40E+38|4字节|
  
  * 日期和时间类型
  
  |数据类型|范围|储存长度|
  |:--:|:---:|:-------:|
  |datatime|1753.1.1~9999.12.31|8字节|
  |smalldatatime|1900.1.1~2079.6.6|4字节|
  
  * 字符串类型
  
  |数据类型|范围|储存长度|
  |:--:|:---:|:-------:|
  |char|1~8000个字符|一个字符一个字节,固定长度，如果插入字符不足，系统自动补上空格|
  |varchar|1~8000字符|1个字符占一个字节（大小与输入字符匹配）|
  |text|1~2^31-1|1个字符占一个字节（大小与输入字符匹配）,最大2GB|
  
  * Unicode字符串型
  
  |数据类型|范围|储存长度|
  |:--:|:---:|:-------:|
  |nchar|1~4000|1个字符占2字节，为固定长度，如果插入的数据不够定义的长度，系统会自动补上空格|
  |nvarchar|1~4000|1个字符占2字节（大小与输入字符匹配）|
  |ntext|1~20^30-1|最大2GB|
 
 <p id="a2"></p>

## :mortar_board: 数据表建立 ##

:arrow_double_up:<a href = "#title">返回目录</a>

 ### :orange_book:视图工具创建表 ###
 
 可以通过系统工具自己创建表： 打开数据表 -> 右击表 -> 表  出现下图：
 
 ![](https://github.com/Lumnca/StudySqlServer/blob/master/Image/a3.png)
 
 ****
 填入数据，保存写入表面就创建成功。如果想打开表，右击表->设计 就又可以设置表。
 
 :bulb: **设置主键：主键是表的唯一标识符，只能有一个，但是可以将多个列选为一个主键，Ctrl+C可以选中多个列再右击设为主键。**
 
 ![](https://github.com/Lumnca/StudySqlServer/blob/master/Image/a5.png)
 
 ****
 
 :bulb:   **设置默认值 ：在设计模式下，选中表在下面的属性栏可以找到默认值，并设定一个默认值。在没有初始化这个数据之前，均采用默认值**
 
  ![](https://github.com/Lumnca/StudySqlServer/blob/master/Image/a6.png)
  
   ****
 
 :bulb: **设置标识列：这是一个自动增加的量，标识种子为起始值，标识增量为每次增加的量。设置方式 ->标识规范 ->是标识（设置为是） -> 设置种子与增量**
 
  ![](https://github.com/Lumnca/StudySqlServer/blob/master/Image/a7.png)
  
   ****
 
 :bulb: **建立表与表的关系 ：在数据表中，表与表之间并不完全的独立，我们可以使用外键来建立联系。比如在一个学生信息表中，有一项为成绩，当然成绩是由很多数据的，所以成绩我们就可以又做一个表，所以在学生信息表中的成绩就引申出了一个成绩表，我们可以通过成绩列设置一个外键，来指向成绩表都主键，因为主键可以标识该表中唯一的记录，因为外键指向主键，所以这两个键的类型和大小必须一致，但是段落名可以不一样。如下成绩表：**
 
  ![](https://github.com/Lumnca/StudySqlServer/blob/master/Image/a12.png)
 
 
**我们想把这个设为学生信息表的成绩列的外键（点击关系）：**

![](https://github.com/Lumnca/StudySqlServer/blob/master/Image/a8.png)
 
 **添加添加新的关系：**
 
![](https://github.com/Lumnca/StudySqlServer/blob/master/Image/a9.png)

**添加好了之后，在视图的左上角，会有一个表关系的FK的联系表，再到右边的常规中的表和列规范，点击那个...的按钮：**
 
 ![](https://github.com/Lumnca/StudySqlServer/blob/master/Image/a10.png)
 
 **像下面的例子一样设置为外键与主键的对应，注意外键与联系表的主键的类型与大小要一致，名字可以不一样：**
 
 ![](https://github.com/Lumnca/StudySqlServer/blob/master/Image/a11.png)
 
 *****
 
:bulb:  **设置索引 ：使用索引，可以加快从表或视图中检索行的速度，这个会在后面介绍，这里你只可以把索引当做一个排序，比如你要查第
  37号的信息，数据库会很快定位到学号为37的记录，如果37号不存在，数据库也不会再去搜索其他的记录。如果没有建立索引，数据库会一条条信息检索才能知道该记录是否存在。在本例中我们以学生姓名为检索，建立检索方法如下：
  
  **右击表视图任意位置，点击索引/键选项出现下图：**
  
   ![](https://github.com/Lumnca/StudySqlServer/blob/master/Image/a13.png)
 
可以设置单个或者多个列作为检索，这里只以姓名为检索。也可以选择他是升序，还是降序排布。退出保存。

*****

:bulb: **设置约束： 设置约束可以对数据进行范围设置以及规范输入**

  * 设立Unique约束 ：Unique约束是指定该字段下的数据不能有重复，但是可以有NUll。比如学号等这些数据不允许有重复值，虽然可以使用主键进行唯一标识，但是主键只能有一个，所以我们需要使用Unique约束。我们这里对姓名做唯一不重复标识：
  
 ![](https://github.com/Lumnca/StudySqlServer/blob/master/Image/a14.png)  
 
 
 * Check约束 ： Check约束常用与限制数据位于那些范围中，比如下面的例子，成绩只能位于0~100 这可以把约束表达式写成： (语文>=0) and (语文<=100).在表视图任意一处右击选择Check约束，点击左下角的添加就可以像下面一样设置：
 
  ![](https://github.com/Lumnca/StudySqlServer/blob/master/Image/a15.png)  
  
  
